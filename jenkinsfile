pipeline{
    agent any
    environment {
    PATH = "${PATH}:${getterraformPath()}"
    }
    stages{
        stage('terraform init'){
            steps{
                sh "terraform init"
            }
        }
        
        stage('terraform format'){
            steps{
                sh "terraform plan"
            }
        }
        
       stage('terraform format'){
        steps{
          sh "terraform apply"
            }
        }
    }
      
}
def getterraformPath(){
   def tfhome = tool name: 'terraform', type: 'terraform'
   return tfhome
}
